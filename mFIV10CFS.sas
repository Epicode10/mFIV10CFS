/*###############################################################################
# Description: mFI-v10 for moderate to severe frailty classification in CFS
# Algorithm: logistic regression 
# Version: 1.0
# Lab version: beta 1.0
# Created: 2024/11/18
################################################################################*/

/*################################################################################
# Example data
################################################################################*/
data data;
input age	gender	mFI_v10; 
datalines;
62.62954285	0	0.152367307
46.73766639	1	0.05757499
63.29799263	0	0.922630866
62.72429321	0	0.85663575
54.14641434	0	0.459233754
34.60049958	1	0.670594539
40.71432965	0	0.394730396
47.05279553	0	0.997738558
49.94232827	1	0.23316904
74.04653389	0	0.534949962
57.63593461	1	0.664189353
42.00990751	0	0.79663503
38.52342991	1	0.483223093
47.10538426	0	0.010637383
47.00784882	0	0.106638761
45.88489167	0	0.706646397
52.52223448	1	0.554102191
41.08078873	1	0.187104422
54.35683299	0	0.508193521
37.62461578	1	0.226601236
47.75732115	1	0.66101712
53.77395646	0	0.077426328
51.33336361	1	0.709376279
58.0418951	0	0.663494246
49.42893226	0	0.587130911
55.03607972	1	0.567228423
60.85769362	0	0.667077265
43.0904616	1	0.285302775
37.15400646	0	0.506723563
50.46726172	0	0.810637121
;


/*################################################################################
# risk of moderate to severe frailty classification
################################################################################*/

data data; set data;
prob = exp(-8.24+0.08*age-0.44*gender+9.38*mFI_v10)/(1+exp(-8.24+0.08*age-0.44*gender+9.38*mFI_v10));
if prob > 0.29 then prob_threshold = 1; else prob_threshold = 0;
run;
